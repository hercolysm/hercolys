# instalar docker linux (fedora)
dnf install docker-ce
ou
baixar o rpm no site: https://www.docker.com/community-edition
cd ~/Downloads/
dnf -y install docker-ce-17.06.0.ce-1.fc24.x86_64.rpm

# ver a versao do docker
docker -v

# habilitar docker
systemctl enable docker

(aprender a gerar docker_system.tar)

# carregar imagem
docker load -i docker_system.tar

# listar imagens
docker images

# configurar docker
tar -xvf run-docker.tar
vim config.php 
vim make.php

# executar make
php make.php 

Trabalhando com containers

# listar containers
docker container ps -a

# iniciar/restart/encerrar container
docker container start <nome_container>
docker container restart <nome_container>
docker container stop <nome_container>

# acessar container
docker container exec -ti <nome_container> /bin/bash

# ip padrão da máquina
172.17.0.x

# criar container
docker container run -d (modo daemon) --name <nome_container> <nome_imagem> sleep 1000 

# executar comandos no container
docker container exec -ti <nome_container> <comando>
exemplos: ifconfig, ping , bash e etc

# remover container
docker container rm -f <nome_container>

Tipos de rede do docker

- None Network (Sem acesso a rede, exemplo: para serviços interno)
- Bridge Network (Padrão) (Máquinas com interface de redes que usam uma ponte para se conectar ao host da rede)
- Host Network (Máquinas com interface de redes que conectando-se diretamente ao host da rede)
- Overlay Network (Swarm) (Para containers clusterizados)

# exibir redes disponiveis
docker network ls

# ver informações da rede
docker network inspect <nome_da_rede>

# criar uma rede
docker network create --drive bridge <nome_nova_rede>

# remover uma rede
docker network rm <nome_rede>

# criar containers selecionando a rede:
docker container run -d --name <nome_container> --net <nome_rede> <nome_imagem> <comando>

# adicionar rede a um container
docker container connect <nome_rede> <nome_container>

# remover rede de um container
docker container disconnect <nome_rede> <nome_container>


# script para auxiliar na criaçao de container com multiplos diretorios
////////// make.php \\\\\\\\\\\
<?php

$container_name = "projeto";
$image_name = "projeto_imagem";

$configs = [
	"/var/www/html/projeto/" => "/home/user/projeto/",
	"/opt/projeto/files/" => "/home/user/files/",
];

$str_mount = null;

foreach ($configs as $target => $source) {
	if (!empty($source)) {
		$str_mount.= "--mount type=bind,source={$source},target={$target} ";
	}
}

$str = 'docker run -d --name='.$container_name.' '.$str_mount.' '.$image_name;
print $str."\n";

system($str);

?>
////////// fim do script \\\\\\\\\\\